window.paypalPartyFrontend = {};
window.paypalPartyFrontend.payment = {};

window.paypalPartyFrontend.payment.init = function() {
	paypal.Button.render( {
		env: 'sandbox', // Specify 'sandbox' for the test environment

		client: {
			sandbox: 'Aak9dxPs6gPsdFIFpPlzAJFpBnPJl3aGozmMdinpikN4_XjLwzhGRQIPWBAUk-6cgVxbeHjb4pocQYqe'
		},

		payment: function( resolve, reject ) {
			paypal.request.post( ajaxurl, { 'action': 'set_express_checkout' } )
				.then( function( data ) { resolve( data.TOKEN ); })
				.catch( function( err ) { reject( err ); });
		},

		onAuthorize: function( data, actions ) {
			console.log(data);
		}

	}, '#paypal-button' );
};

jQuery( document ).ready( window.paypalPartyFrontend.payment.init );
